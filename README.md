<a href="https://www.espressif.com">
    <img src="https://www.espressif.com/sites/all/themes/espressif/logo-black.svg" alt="Espressif logo" title="Espressif" align="right" height="20" />
</a>

# esp-idf-configdep: sdkconfig.h dependency optimizer for C code

**esp-idf-configdep** is a utility designed to optimize the ESP-IDF build process by
refining how source files depend on configuration changes. In a standard build,
the ESP-IDF system generates a generic `sdkconfig.h` file. Because most source
files include this header, changing a single configuration option often
triggers a full project recompilation, even for files unaffected by the change.

The tool acts as a compiler wrapper within the CMake build system. It executes
the original compiler command and checks for the `-MF` flag used to generate
dependency files. If the generated dependency file includes `sdkconfig.h`,
**esp-idf-configdep** modifies it by replacing the generic header dependency with
specific dependencies on granular dummy files generated by `esp-idf-kconfig`.

By scanning the source file for specific `CONFIG_*` reference strings,
**esp-idf-configdep** ensures that a source file is only marked as "dirty" when one of
its actual configuration dependencies changes. This ensures that after a
configuration update, only the directly affected source files are rebuilt,
reducing incremental build times.
